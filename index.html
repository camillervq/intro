<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Maker - Crie seu cartão de apresentação</title>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --text: #1f2937;
            --bg: #f3f4f6;
            --card-bg: #ffffff;
            --border: #e5e7eb;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text);
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #6b7280;
            margin-bottom: 30px;
        }
        
        .card-maker {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        @media (min-width: 992px) {
            .card-maker {
                flex-direction: row;
            }
        }
        
        .form-section {
            flex: 1;
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .preview-section {
            flex: 1;
            position: sticky;
            top: 20px;
            align-self: flex-start;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }
        
        input[type="text"],
        input[type="date"],
        textarea,
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus,
        input[type="date"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .slider-label {
            min-width: 100px;
            text-align: right;
            font-weight: 500;
        }
        
        .slider {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: #d1d5db;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }
        
        .slider-end-label {
            min-width: 80px;
            font-weight: 500;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
        }
        
        .checkbox-item input {
            margin-right: 8px;
        }
        
        .image-upload {
            border: 2px dashed #9ca3af;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        
        .image-upload:hover {
            border-color: var(--primary);
            background-color: #f9fafb;
        }
        
        .image-upload p {
            margin: 0;
            color: #6b7280;
        }
        
        #profileImage {
            display: none;
        }
        
        #imagePreview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
            display: none;
            border-radius: 5px;
        }
        
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-block;
            text-align: center;
        }
        
        .btn:hover {
            background-color: var(--primary-hover);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .card-preview {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .card-template {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
        
        #cardCanvas {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }
        
        .download-btn {
            margin-top: 20px;
        }
        
        .hidden {
            display: none;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #6b7280;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Card Maker</h1>
            <p class="subtitle">Crie seu cartão de apresentação personalizado para a comunidade</p>
        </header>
        
        <div class="card-maker">
            <div class="form-section">
                <h2>Informações Pessoais</h2>
                
                <div class="form-group">
                    <label for="profileImage">Foto de Perfil</label>
                    <div class="image-upload" id="imageUpload">
                        <p>Clique para adicionar uma imagem</p>
                        <input type="file" id="profileImage" accept="image/*">
                        <img id="imagePreview" alt="Prévia da imagem">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="username">Nome de Usuário</label>
                    <input type="text" id="username" placeholder="Seu nome na comunidade">
                </div>
                
                <div class="form-group">
                    <label for="joinDate">Data de Entrada</label>
                    <input type="date" id="joinDate">
                </div>
                
                <div class="form-group">
                    <label for="country">País</label>
                    <input type="text" id="country" placeholder="Seu país">
                </div>
                
                <div class="form-group">
                    <label for="timezone">Fuso Horário</label>
                    <input type="text" id="timezone" placeholder="Ex: UTC-3">
                </div>
                
                <h2>Características</h2>
                
                <div class="form-group">
                    <div class="slider-container">
                        <span class="slider-label">Introvertido</span>
                        <input type="range" min="0" max="100" value="50" class="slider" id="introvertSlider">
                        <span class="slider-end-label">Extrovertido</span>
                    </div>
                    
                    <div class="slider-container">
                        <span class="slider-label">Observador</span>
                        <input type="range" min="0" max="100" value="50" class="slider" id="lurkerSlider">
                        <span class="slider-end-label">Ativo</span>
                    </div>
                    
                    <div class="slider-container">
                        <span class="slider-label">Passageiro</span>
                        <input type="range" min="0" max="100" value="50" class="slider" id="passengerSlider">
                        <span class="slider-end-label">Líder</span>
                    </div>
                </div>
                
                <h2>Idiomas</h2>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="langEnglish">
                            <label for="langEnglish">Inglês</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="langPortuguese">
                            <label for="langPortuguese">Português</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="langSpanish">
                            <label for="langSpanish">Espanhol</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="langOther">
                            <label for="langOther">Outro:</label>
                            <input type="text" id="langOtherText" placeholder="Especifique" style="width: 100px; margin-left: 5px;">
                        </div>
                    </div>
                </div>
                
                <h2>Sobre Mim</h2>
                
                <div class="form-group">
                    <textarea id="aboutMe" placeholder="Conte um pouco sobre você..."></textarea>
                </div>
                
                <button id="generateBtn" class="btn btn-block">Gerar Cartão</button>
            </div>
            
            <div class="preview-section">
                <h2>Prévia do Cartão</h2>
                
                <div class="card-preview">
                    <div class="card-template">
                        <canvas id="cardCanvas" width="500" height="700"></canvas>
                    </div>
                    
                    <button id="downloadBtn" class="btn download-btn hidden">Baixar Cartão</button>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Criado com ❤️ para a comunidade</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos do formulário
            const imageUpload = document.getElementById('imageUpload');
            const profileImage = document.getElementById('profileImage');
            const imagePreview = document.getElementById('imagePreview');
            const generateBtn = document.getElementById('generateBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const canvas = document.getElementById('cardCanvas');
            const ctx = canvas.getContext('2d');
            
            // Variável para armazenar a imagem carregada
            let uploadedImage = null;
            
            // Evento para upload de imagem
            imageUpload.addEventListener('click', function() {
                profileImage.click();
            });
            
            profileImage.addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    
                    reader.onload = function(event) {
                        imagePreview.src = event.target.result;
                        imagePreview.style.display = 'block';
                        
                        // Carregar a imagem para uso no canvas
                        uploadedImage = new Image();
                        uploadedImage.src = event.target.result;
                        uploadedImage.onload = function() {
                            // Atualizar prévia se já houver dados
                            if (document.getElementById('username').value) {
                                generateCard();
                            }
                        };
                    };
                    
                    reader.readAsDataURL(file);
                }
            });
            
            // Evento para gerar o cartão
            generateBtn.addEventListener('click', generateCard);
            
            // Evento para baixar o cartão
            downloadBtn.addEventListener('click', function() {
                const link = document.createElement('a');
                link.download = 'meu-cartao.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
            
            // Função para gerar o cartão
            function generateCard() {
                // Limpar canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Dados do formulário
                const username = document.getElementById('username').value || 'Seu Nome';
                const joinDate = document.getElementById('joinDate').value || 'Data não informada';
                const country = document.getElementById('country').value || 'País não informado';
                const timezone = document.getElementById('timezone').value || 'UTC';
                const aboutMe = document.getElementById('aboutMe').value || 'Um pouco sobre mim...';
                
                const introvertValue = parseInt(document.getElementById('introvertSlider').value);
                const lurkerValue = parseInt(document.getElementById('lurkerSlider').value);
                const passengerValue = parseInt(document.getElementById('passengerSlider').value);
                
                // Verificar idiomas selecionados
                let languages = [];
                if (document.getElementById('langEnglish').checked) languages.push('Inglês');
                if (document.getElementById('langPortuguese').checked) languages.push('Português');
                if (document.getElementById('langSpanish').checked) languages.push('Espanhol');
                if (document.getElementById('langOther').checked && document.getElementById('langOtherText').value) {
                    languages.push(document.getElementById('langOtherText').value);
                }
                const languagesText = languages.length > 0 ? languages.join(', ') : 'Idiomas não informados';
                
                // Desenhar fundo do cartão
                ctx.fillStyle = '#4f46e5';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Desenhar área branca central
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(20, 20, canvas.width - 40, canvas.height - 40);
                
                // Desenhar cabeçalho
                ctx.fillStyle = '#4f46e5';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('CARTÃO DE APRESENTAÇÃO', canvas.width / 2, 60);
                
                // Desenhar foto de perfil (se existir)
                if (uploadedImage) {
                    // Criar máscara circular
                    ctx.save();
                    ctx.beginPath();
                    ctx.arc(canvas.width / 2, 140, 60, 0, Math.PI * 2);
                    ctx.closePath();
                    ctx.clip();
                    
                    // Calcular proporções para manter a imagem quadrada
                    const size = 120;
                    const x = canvas.width / 2 - size / 2;
                    const y = 140 - size / 2;
                    
                    ctx.drawImage(uploadedImage, x, y, size, size);
                    ctx.restore();
                } else {
                    // Placeholder se não houver imagem
                    ctx.fillStyle = '#e5e7eb';
                    ctx.beginPath();
                    ctx.arc(canvas.width / 2, 140, 60, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#9ca3af';
                    ctx.font = '14px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText('Sem foto', canvas.width / 2, 145);
                }
                
                // Desenhar informações do usuário
                ctx.fillStyle = '#1f2937';
                ctx.font = 'bold 20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(username, canvas.width / 2, 220);
                
                ctx.font = '14px Arial';
                ctx.fillText(`Membro desde: ${formatDate(joinDate)}`, canvas.width / 2, 250);
                ctx.fillText(`${country} | ${timezone}`, canvas.width / 2, 270);
                
                // Desenhar características
                ctx.textAlign = 'left';
                ctx.font = 'bold 16px Arial';
                ctx.fillText('Características:', 40, 310);
                
                // Barra de introvertido/extrovertido
                drawTraitBar(ctx, 40, 330, 'Introvertido', 'Extrovertido', introvertValue);
                
                // Barra de observador/ativo
                drawTraitBar(ctx, 40, 370, 'Observador', 'Ativo', lurkerValue);
                
                // Barra de passageiro/líder
                drawTraitBar(ctx, 40, 410, 'Passageiro', 'Líder', passengerValue);
                
                // Desenhar idiomas
                ctx.font = 'bold 16px Arial';
                ctx.fillText('Idiomas:', 40, 450);
                
                ctx.font = '14px Arial';
                ctx.fillText(languagesText, 40, 470);
                
                // Desenhar "Sobre Mim"
                ctx.font = 'bold 16px Arial';
                ctx.fillText('Sobre Mim:', 40, 510);
                
                ctx.font = '14px Arial';
                wrapText(ctx, aboutMe, 40, 530, canvas.width - 80, 24);
                
                // Mostrar botão de download
                downloadBtn.classList.remove('hidden');
            }
            
            // Função auxiliar para desenhar barras de características
            function drawTraitBar(ctx, x, y, leftLabel, rightLabel, value) {
                // Desenhar rótulos
                ctx.font = '12px Arial';
                ctx.fillStyle = '#4b5563';
                ctx.fillText(leftLabel, x, y);
                ctx.textAlign = 'right';
                ctx.fillText(rightLabel, canvas.width - x, y);
                ctx.textAlign = 'left';
                
                // Desenhar barra de fundo
                const barWidth = canvas.width - 2 * x;
                const barHeight = 8;
                const barY = y + 15;
                
                ctx.fillStyle = '#e5e7eb';
                ctx.fillRect(x, barY, barWidth, barHeight);
                
                // Desenhar preenchimento com gradiente
                const gradient = ctx.createLinearGradient(x, barY, x + barWidth, barY);
                gradient.addColorStop(0, '#4f46e5');
                gradient.addColorStop(1, '#a78bfa');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(x, barY, barWidth * (value / 100), barHeight);
                
                // Desenhar marcador
                const markerX = x + (barWidth * (value / 100));
                ctx.fillStyle = '#4f46e5';
                ctx.beginPath();
                ctx.arc(markerX, barY + barHeight / 2, 6, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Função auxiliar para quebra de texto em múltiplas linhas
            function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
                const words = text.split(' ');
                let line = '';
                
                for (let n = 0; n < words.length; n++) {
                    const testLine = line + words[n] + ' ';
                    const metrics = ctx.measureText(testLine);
                    const testWidth = metrics.width;
                    
                    if (testWidth > maxWidth && n > 0) {
                        ctx.fillText(line, x, y);
                        line = words[n] + ' ';
                        y += lineHeight;
                    } else {
                        line = testLine;
                    }
                }
                
                ctx.fillText(line, x, y);
            }
            
            // Função auxiliar para formatar data
            function formatDate(dateString) {
                if (!dateString) return 'Data não informada';
                
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return dateString;
                
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();
                
                return `${day}/${month}/${year}`;
            }
            
            // Gerar cartão inicial se já houver dados
            if (document.getElementById('username').value) {
                generateCard();
            }
        });
    </script>
</body>
</html>
